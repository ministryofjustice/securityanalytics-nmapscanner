function:
  handler: sample_lambda.sample.sample
  name: ${self:custom.deployStage}-${self:service}-sample
  role: sampleRole
  layers:
    - ${ssm:/${self:custom.appName}/${self:custom.ssmSourceStage}/lambda/layer/utils}
  events:
    - http:
        path: ${self:custom.deployStage}/${self:custom.pluginName}/sample
        method: get
        authorizer: ${self:custom.apiGatewayConfig.authorizer}

role:
  Type: AWS::IAM::Role
  Properties:
    Path:
      # Not allowed '-' characters in a path
      Fn::Join:
        - ""
        - Fn::Split:
            - "-"
            - /${self:custom.appName}/${self:custom.deployStage}/${self:service}/sample/
    RoleName: ${self:custom.deployStage}-${self:service}-sample
    AssumeRolePolicyDocument:
      Version: '2012-10-17'
      Statement:
        - Effect: Allow
          Principal:
            Service:
              - lambda.amazonaws.com
          Action: sts:AssumeRole